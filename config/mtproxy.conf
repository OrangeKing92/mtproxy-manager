# MTProxy Configuration File
# This file uses YAML format

# Server Configuration
server:
  # Host to bind to (0.0.0.0 for all interfaces)
  host: 0.0.0.0
  
  # Port to listen on
  port: 8443
  
  # Proxy secret (32 hex characters)
  # Generate new: openssl rand -hex 16
  secret: 60d23c4b7c3ed2d38467742beae2d137
  
  # TLS secret for TLS proxy mode (ee + secret + domain_hex)
  # Auto-generated during deployment
  tls_secret: ee60d23c4b7c3ed2d38467742beae2d137777777772e636c6f7564666c6172652e636f6d
  
  # Fake domain for TLS masquerading
  fake_domain: www.cloudflare.com
  
  # Maximum concurrent connections
  max_connections: 1000
  
  # Connection timeout in seconds
  timeout: 300
  
  # Number of worker processes
  workers: 4
  
  # Buffer size for data transfer
  buffer_size: 8192
  
  # Keep-alive timeout
  keepalive_timeout: 60

# Logging Configuration
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: INFO
  
  # Log file path
  file: /opt/python-mtproxy/logs/mtproxy.log
  
  # Maximum log file size
  max_size: 100MB
  
  # Number of backup log files to keep
  backup_count: 7
  
  # Log format
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# Security Configuration
security:
  # List of allowed IP addresses (empty = allow all)
  allowed_ips: []
  
  # List of banned IP addresses
  banned_ips: []
  
  # Rate limiting: maximum connections per minute per IP
  rate_limit: 100
  
  # Maximum connections per IP
  max_connections_per_ip: 10

# Monitoring Configuration
monitoring:
  # Enable statistics collection
  stats_enabled: true
  
  # Port for statistics HTTP server
  stats_port: 8080
  
  # Health check interval in seconds
  health_check_interval: 30
  
  # Enable performance monitoring
  performance_monitoring: true

# Telegram Configuration
telegram:
  # Telegram API ID (optional)
  api_id: null
  
  # Telegram API Hash (optional)
  api_hash: null
  
  # Preferred datacenter (auto, 1, 2, 3, 4, 5)
  datacenter: auto
  
  # Connection pool size
  connection_pool_size: 10

# Advanced Settings
advanced:
  # Enable debug mode
  debug: false
  
  # Custom user agent
  user_agent: "MTProxy/1.0"
  
  # DNS servers to use
  dns_servers:
    - "8.8.8.8"
    - "1.1.1.1"
  
  # TCP keep-alive settings
  tcp_keepalive:
    enabled: true
    idle: 600
    interval: 60
    count: 3
